{% extends 'base.html' %}
{% load staticfiles %}

{% block title %}
    修改密码
{% endblock %}

{% block nav_login_active %}active{% endblock %}
{% block lunbobox %}{% endblock %}

{% block content %}
    <div class="container" style="margin-top: 70px;">
         {% if user.is_authenticated %}
            <div class="head-login">
                <h2 class="text-info">修改密码</h2>
                <span>您的密码会被加密保存，请放心使用</span>
            </div>

            <div class="change_password clearfix">
                <form action="" method="POST">
                    {% csrf_token %}
                    {% for field in password_form %}
                        <label for="{{ field.id_for_label }}">{{ field.label }}:</label>
                        {{ field }}
                        <p class="text-danger">{{ field.errors.as_text }}</p>
                    {% endfor %}
                    {# 错误信息标红 #}
                    <span class="text-danger">{{ login_form.non_field_errors }}</span>

                    <button class="btn btn-primary pull-right" type="submit">修改</button>
                </form>
            </div>
        {% else %}
            <span>您尚未登录，3秒后跳转到首页...</span>
            <script type="text/javascript">
                // 定时3秒跳转
                setTimeout( function(){
                    window.location.href = '/';
                }, 3*1000);
            </script>
        {% endif %}
    </div>
{% endblock %}
